# Skills

This is a microservice to store skills data.

## Requirements

- npm
- Node.js (12+)

### Local Node 13 and npm installation (for Linux Mint)

````bash
curl -sL https://deb.nodesource.com/setup_13.x | sudo -E bash -
sudo apt install nodejs
````

### Running with Docker (local)

Please, check [docs/installationWithDocker.md](docs/installationWithDocker.md)

## Technologies

- [Express Framework](https://expressjs.com)
- [Mongoose](https://mongoosejs.com)
- [Chai](https://www.chaijs.com) and [Mocha](https://mochajs.org) for testing

## Usage

After cloning this repository, run:

````bash
npm install
````

Start the application:

````bash
npm start
````

Use Postman to use the API or any API consumer (such as Insommia). If you prefer, you can even use the curl command.

**If you are using Postman, just import this file with examples of requests: [docs/skills.postman_collection.json](docs/skills.postman_collection.json)**

### Rules

- A skill should consist of:
  - id (auto-generated by the system)
  - name (required)
  - level (required, only accepts the following values: JUNIOR, SENIOR or EXPERT)
  - createdAt (auto-generated by the system when it was created the first time)
  - updatedAt (auto-generated by the system when it was updated the last time)

### Routes

- GET /api/skills -> Get all skills
  - Request body:

    ````json
    {}
    ````

  - Response sample:

    ````json
    {
      "skills":[
        {
          "_id":"5e0bb9852ffa0a2a4244860d",
          "name":"Node Full A",
          "level":"SENIOR",
          "createdAt":"2019-12-31T21:11:33.119Z",
          "updatedAt":"2019-12-31T21:11:33.119Z",
          "__v":0
        },
        {
          "_id":"5e0b9fdb2ffa0a2a4244860c",
          "name":"Node Full A",
          "level":"SENIOR",
          "createdAt":"2019-12-31T19:22:03.495Z",
          "updatedAt":"2019-12-31T19:22:03.495Z",
          "__v":0
        }
      ]
    }
    ````

- GET /api/skills/**skillId** -> Get a skill
  - Request body:

    ````json
    {}
    ````

  - Response sample:

    ````json
    {
      "skill":{
        "_id":"5e0b9fdb2ffa0a2a4244860c",
        "name":"Node Full A",
        "level":"SENIOR",
        "createdAt":"2019-12-31T19:22:03.495Z",
        "updatedAt":"2019-12-31T19:22:03.495Z",
        "__v":0
      }
    }
    ````

- POST /api/skills -> Create a skill
  - Request body:

    ````json
    {
     "skill": {
      "name": "Full Node.js Expertise",
      "level": "SENIOR"
     }
    }
    ````

  - Response sample:

    ````json
    {
        "skill": {
            "_id": "5e0bbab52ffa0a2a4244860e",
            "name": "Full Node.js Expertise",
            "level": "SENIOR",
            "createdAt": "2019-12-31T21:16:37.491Z",
            "updatedAt": "2019-12-31T21:16:37.491Z",
            "__v": 0
        }
    }
    ````

- PUT /api/skills/**skillId** -> Update a skill
  - Request body:

    ````json
    {
     "skill": {
      "name": "Full Node.js Expertise",
      "level": "EXPERT"
     }
    }
    ````

  - Response sample:

    ````json
    {
        "skill": {
            "_id": "5e0bbccb3cb9b80d2c581609",
            "name": "Full Node.js Expertise",
            "level": "EXPERT",
            "createdAt": "2019-12-31T21:25:32.022Z",
            "updatedAt": "2019-12-31T21:25:53.430Z",
            "__v": 0
        }
    }
    ````

- DELETE /api/skills/**skillId** -> Delete a skill
  - Request body:

    ````json
    {}
    ````

  - Response sample:

    ````bash
    200 OK (HTTP Code)
    ````

## Testing

Run

  ````bash
  npm run test
  ````

## More

- This application uses an in-memory database as default. Once restarting the app, all data will be lost.
  - Optionally, it's possible to change to a persistent MongoDB database. Just copy the file below and define the environment variable MONGO_URI

    ````bash
    cp -v .env.example .env
    ````

- This application runs in 3000 port as default. To change it, change APP_PORT in .env file above  (as .env.example file)
